<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sharon Howard">
<meta name="description" content="What were petitions about?">

<title>QS petition topics – Exploring The Power of Petitioning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2e1c76687fb8e56fe79e3ab19f855661.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Exploring The Power of Petitioning</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../themes/index.html"> 
<span class="menu-text">Themes</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#quarter-sessions-petitions-topics-and-themes" id="toc-quarter-sessions-petitions-topics-and-themes" class="nav-link active" data-scroll-target="#quarter-sessions-petitions-topics-and-themes">Quarter Sessions petitions topics and themes</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The data</a>
  <ul class="collapse">
  <li><a href="#the-counties" id="toc-the-counties" class="nav-link" data-scroll-target="#the-counties">The counties</a></li>
  <li><a href="#the-topics" id="toc-the-topics" class="nav-link" data-scroll-target="#the-topics">The topics</a></li>
  <li><a href="#caveats" id="toc-caveats" class="nav-link" data-scroll-target="#caveats">caveats</a></li>
  </ul></li>
  <li><a href="#overview-of-topics" id="toc-overview-of-topics" class="nav-link" data-scroll-target="#overview-of-topics">Overview of topics</a></li>
  <li><a href="#comparing-counties-three-views" id="toc-comparing-counties-three-views" class="nav-link" data-scroll-target="#comparing-counties-three-views">Comparing counties: three views</a>
  <ul class="collapse">
  <li><a href="#a-bar-chart" id="toc-a-bar-chart" class="nav-link" data-scroll-target="#a-bar-chart">a bar chart</a></li>
  <li><a href="#another-bar-chart" id="toc-another-bar-chart" class="nav-link" data-scroll-target="#another-bar-chart">another bar chart</a></li>
  <li><a href="#mosaic-plot" id="toc-mosaic-plot" class="nav-link" data-scroll-target="#mosaic-plot">mosaic plot</a></li>
  </ul></li>
  <li><a href="#change-over-time" id="toc-change-over-time" class="nav-link" data-scroll-target="#change-over-time">Change over time</a>
  <ul class="collapse">
  <li><a href="#stacked-bar-chart" id="toc-stacked-bar-chart" class="nav-link" data-scroll-target="#stacked-bar-chart">stacked bar chart</a></li>
  <li><a href="#faceted-bar-chart" id="toc-faceted-bar-chart" class="nav-link" data-scroll-target="#faceted-bar-chart">faceted bar chart</a></li>
  <li><a href="#heatmap" id="toc-heatmap" class="nav-link" data-scroll-target="#heatmap">heatmap</a></li>
  </ul></li>
  <li><a href="#gender" id="toc-gender" class="nav-link" data-scroll-target="#gender">Gender</a>
  <ul class="collapse">
  <li><a href="#stacked-bar-chart-1" id="toc-stacked-bar-chart-1" class="nav-link" data-scroll-target="#stacked-bar-chart-1">stacked bar chart</a></li>
  <li><a href="#mosaic" id="toc-mosaic" class="nav-link" data-scroll-target="#mosaic">mosaic</a></li>
  <li><a href="#heatmap-1" id="toc-heatmap-1" class="nav-link" data-scroll-target="#heatmap-1">heatmap</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">QS petition topics</h1>
  <div class="quarto-categories">
    <div class="quarto-category">QS</div>
    <div class="quarto-category">topics</div>
  </div>
  </div>

<div>
  <div class="description">
    What were petitions about?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sharon Howard </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="quarter-sessions-petitions-topics-and-themes" class="level2">
<h2 class="anchored" data-anchor-id="quarter-sessions-petitions-topics-and-themes">Quarter Sessions petitions topics and themes</h2>
<p>The Power of Petitioning project team manually assigned <strong>broad topics</strong> to each of the transcribed collections, as well as a number of other collections for which we had rich enough metadata. I’ll focus for now on Quarter Sessions because they have their own set of topics and the project tried (as far as possible) to apply them consistently to enable comparison of the counties. [I’ll try to do a later update for the State Papers and House of Lords collections, but the topics for these are quite different.]</p>
<p>There is a brief analysis of topics for each county in the introductions to the <a href="https://www.british-history.ac.uk/search/series/petitions">British History Online editions</a>, so I’ll focus more on an overview and comparisons here.</p>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>The data is available, with full documentation, from <a href="https://doi.org/10.5281/zenodo.7027692">Zenodo</a>.</p>
<p>[<strong>Note</strong>: the first version of this page also included about 400 Hertfordshire petitions, for which I had less detailed information. The Hertfordshire data has not been included in TPOP’s public data release and it made only minor differences to the analysis on this page, so I’ve removed it for now. Some statistics will differ from the original version.]</p>
<section id="the-counties" class="level3">
<h3 class="anchored" data-anchor-id="the-counties">The counties</h3>
<ul>
<li><a href="https://www.british-history.ac.uk/petitions/cheshire">Cheshire</a>
<ul>
<li>transcriptions / metadata 1573-1798</li>
<li>all pre-1600 petitions, then a sample of all surviving petitions for 1 year in every decade [613 petitions]</li>
</ul></li>
<li><a href="https://www.british-history.ac.uk/petitions/derbyshire/introduction">Derbyshire</a>
<ul>
<li>transcriptions 1632-1770</li>
<li>every surviving petition that could be dated to within a decade [94 petitions]</li>
<li>NB however, many surviving petitions can’t be dated and have been excluded from the collection</li>
</ul></li>
<li><a href="https://www.british-history.ac.uk/petitions/staffordshire/introduction">Staffordshire</a>
<ul>
<li>transcriptions 1589-1799</li>
<li>sample: all surviving petitions from one year per decade [239 petitions]</li>
</ul></li>
<li><a href="https://www.british-history.ac.uk/petitions/westminster/introduction">Westminster</a>
<ul>
<li>transcriptions 1620-1799</li>
<li>every surviving petition [424 petitions]</li>
</ul></li>
<li><a href="https://www.british-history.ac.uk/petitions/worcs-quarter-sessions/introduction">Worcestershire</a>
<ul>
<li>transcriptions 1592-1797</li>
<li>every surviving petition (except a few early illegible/damaged ones) [360 petitions]</li>
</ul></li>
</ul>
</section>
<section id="the-topics" class="level3">
<h3 class="anchored" data-anchor-id="the-topics">The topics</h3>
<ul>
<li><strong>alehouse</strong>: all about licences (including victualling houses, inns, taverns)</li>
<li><strong>charitable brief</strong>: requests for certificates to allow the petitioners to collect charity in response to personal calamities such as house fires</li>
<li><strong>cottage</strong>: licences to <a href="https://en.wikipedia.org/wiki/Erection_of_Cottages_Act_1588">build cottages</a> on ‘waste’ lands</li>
<li><strong>dissenting worship</strong>: concerning applications for licences to establish places of worship (following the <a href="https://www.british-history.ac.uk/statutes-realm/vol6/pp74-76">Toleration Act of 1689</a>)</li>
<li><strong>employment</strong>: service, apprenticeship, wages</li>
<li><strong>imprisoned debtors</strong>: applications for release from <a href="https://www.parliament.uk/about/living-heritage/transformingsociety/laworder/policeprisons/case-study/introduction/debtors-relief-acts/">imprisoned debtors</a> (18th century)</li>
<li><strong>litigation</strong>: broad category for uses of and encounters with the legal/criminal justice system (eg request for prosecution, request for mercy or discharge)</li>
<li><strong>military relief</strong>: requests for pensions (soldier, sailor, widow/wife)</li>
<li><strong>officeholding</strong>: mostly to do with constables (eg trying to get out of serving, or seeking compensation for expenses)</li>
<li><strong>paternity</strong>: financial support for children; mostly to do with bastardy, obtaining/avoiding maintenance from father/husband</li>
<li><strong>poor relief</strong>: relief or removal under the poor law system (often complaints that local overseers were refusing to pay relief to which the petitioner was entitled, or parish appeals about removals)</li>
<li><strong>rates</strong>: mainly attempting to impose or avoid payment of various communal rates, levies or taxes</li>
<li><strong>other</strong>: anything that didn’t fit into the categories above</li>
</ul>
</section>
<section id="caveats" class="level3">
<h3 class="anchored" data-anchor-id="caveats">caveats</h3>
<p>The chronological distribution of petitions in several counties is very lumpy, and it’s hard to be sure in some cases whether this reflects actual petitioning trends, random losses or other less random factors, and whether the surviving petitions are representative. Derbyshire is particularly difficult (IIRC, more petitions were excluded than included). Westminster is also problematic; 44 petitions couldn’t be dated to within a single decade (though all were within the period 1620-1640), and these were <em>not</em> evenly distributed across topics.</p>
<p>Two counties, Cheshire and Staffordshire, have been sampled by the simple method of taking one year in ten. This is unlikely to be a significant issue for overviews and comparisons of gender. But it’s much more awkward for any attempt at chronological analysis. I’ve ignored that here and simply counted by decade. But I’ll probably need to think much harder about this before long.</p>
</section>
</section>
<section id="overview-of-topics" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-topics">Overview of topics</h2>
<p>Which were the most popular topics of QS petitions?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_overview_bar-1.png" class="img-fluid figure-img" alt="Horizontal bar chart of petition topics in the Power of Petitioning Quarter Sessions collections, in descending order of frequency; litigation and poor relief are the most popular topics by some distance." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparing-counties-three-views" class="level2">
<h2 class="anchored" data-anchor-id="comparing-counties-three-views">Comparing counties: three views</h2>
<section id="a-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="a-bar-chart">a bar chart</h3>
<p>The colour coding here is not strictly essential but I find it helpful for comparing the different rankings of topics. It can be seen that the counties cluster into two groups with <em>either</em> litigation or poor relief as the most frequent topic of petitioning. Cheshire is unusual for the level of cottage petitions. Westminster has no cottage petitions because cities were exempted from the relevant legislation; more interesting is the frequency of petitioning about employment and infrequency of poor relief petitions.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_counties_bar-1.png" class="img-fluid figure-img" alt="horizontal bar chart of QS petition topics, faceted by county; litigation is top topic in Ches, Staffs and Westmr, poor relief top in Derbyshire, Herts and Worcs." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="another-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="another-bar-chart">another bar chart</h3>
<p>But switching round the comparisons. (For convenience, “other” is excluded this time.) Suggests that within most topics there aren’t massive differences between counties; notable exceptions = Westminster/employment and Derbyshire/poor relief.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_county_topics_pc_bar-1.png" class="img-fluid figure-img" alt="Faceted bar chart of QS petition topics, comparing topic percentage for each county." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mosaic-plot" class="level3">
<h3 class="anchored" data-anchor-id="mosaic-plot">mosaic plot</h3>
<p>These are less common than bar charts, so a bit of explanation:</p>
<ul>
<li>the relative size of each county is indicated by the height of the row</li>
<li>the size of each topic is indicated by the width of the rectangles. (When there are this many categories, it can become difficult to line up each rectangle with its label; I think this is hitting the limits really, even though I’ve excluded the two smallest categories and “other”.)</li>
</ul>
<p>So you can compare the relative size of each topic for each county visually. But the colour coding takes things further.</p>
<ul>
<li>blue means that the topic is (statistically) <em>over</em>-represented</li>
<li>red means that it’s <em>under</em>-represented</li>
<li>grey is neutral</li>
<li>the darker the shading, the stronger the statistical significance</li>
<li>the lines with a red circle represent 0s</li>
</ul>
<p>(The statistical measure is <a href="https://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test">Pearson’s Chi-squared Test</a>.)</p>
<p>This method can produce some surprises. Eg, litigation in Cheshire looks big, and it <em>is</em> the largest single county-topic combination with 177 petitions. But it turns out that’s slightly deceptive, because Cheshire just has so many petitions. (In the second bar chart, you can also see that two counties have a higher % of litigation petitions.) It does, however, confirm the impression that cottage petitions are unusually popular in Cheshire.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_counties_mosaic-1.png" class="img-fluid figure-img" alt="mosaic plot of QS petition topics by county; highlighting significat over- or under-representation of topics." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="change-over-time" class="level2">
<h2 class="anchored" data-anchor-id="change-over-time">Change over time</h2>
<p>NB earlier caveats about the problems caused by missing dates and by sampling. This section should be considered very provisional.</p>
<section id="stacked-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="stacked-bar-chart">stacked bar chart</h3>
<p>This is a popular type of graph… but there are far too many categories for it to be really effective, even after dropping the smallest topics and “other”.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_decades_stacked_bar-1.png" class="img-fluid figure-img" alt="stacked bar chart of QS petition topics per decade; cluttered and hard to make much sense of what is going on." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="faceted-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="faceted-bar-chart">faceted bar chart</h3>
<p>Faceting (or “small multiples”) can be a more effective way of showing complex data. The y axis is scaled for each facet, enabling direct comparison of trends. Having said that, this is a pretty mixed picture!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_decades_faceted_bar-1.png" class="img-fluid figure-img" alt="faceted bar chart of QS petition topics per decade; a bit easier to make comparisons than with a stacked bar chart." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="heatmap" class="level3">
<h3 class="anchored" data-anchor-id="heatmap">heatmap</h3>
<p>(white tiles represent 0s)</p>
<p>This heatmap is an example of how stripping away subtlety can be useful to draw attention to particularly strong patterns. In this case, the “warm” cluster of petitions for military pensions in the 1650s dramatically highlights a legacy of the Civil Wars. But it indicates that a number of other topics were <em>also</em> at or near peaking around the middle of the 17th century. The heatmap also highlights the sparsity of petitions in many topics after 1700, except for the new topics of dissenting worship and imprisoned debtors.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_decades_pc_heatmap-1.png" class="img-fluid figure-img" alt="heatmap of QS petition topics per decade, using percentages of topic rather than numbers; useful to draw attention to the most exceptional topic-decades." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="gender" class="level2">
<h2 class="anchored" data-anchor-id="gender">Gender</h2>
<p>(“na” = collective petitions and a handful of unknowns)</p>
<section id="stacked-bar-chart-1" class="level3">
<h3 class="anchored" data-anchor-id="stacked-bar-chart-1">stacked bar chart</h3>
<p>But this time a “proportional” stacked chart to show % instead of numbers. Again, there are probably too many categories for this to be really effective, even though I’ve reduced the topics again. You can pick out a few things - eg female/poor relief, female/paternity; male/officeholding; na/rates - but it’s hard to get a good idea of their relative significance. On top of that it gives no sense at all of the big differences in size between the gender groups.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_gender_prop_stacked_bar-1.png" class="img-fluid figure-img" alt="proportional stacked bar chart of QS petition topics by gender." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mosaic" class="level3">
<h3 class="anchored" data-anchor-id="mosaic">mosaic</h3>
<p>The mosaic highlights the <em>most important</em> relationships more clearly.</p>
<p>Eg, female petitioners are strongly positively associated with poor relief and paternity, while the negative associations with alehouse, cottage, officeholding are somewhat weaker. Stronger associations for male petitions are negative ones with paternity and poor relief petitions. For collective petitions it’s all about rates (and it is common for “inhabitants” of a township or parish to group together to complain about taxes), but they’re less likely to be litigation-related.</p>
<p>Conversely, eg, although you can see in the bar chart a lower female than male % for military petitions, the difference is too small to register as <em>statistically</em> significant.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_gender_mosaic-1.png" class="img-fluid figure-img" alt="mosaic plot of QS petition topics by gender; notable features include: female/paternity and poor relief petitions are over-represented, male paternity under-represented." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="heatmap-1" class="level3">
<h3 class="anchored" data-anchor-id="heatmap-1">heatmap</h3>
<p>The strong association between mixed gender petitions and litigation stands out here too. It’s an intriguing one, even allowing for the small size of the group.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topics_files/figure-html/topics_gender_heatmap-1.png" class="img-fluid figure-img" alt="heatmap of QS petition topics by gender, using percentage of gender rather than numbers. Intriguing hotspot for mixed gender/litigation petitions." width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>