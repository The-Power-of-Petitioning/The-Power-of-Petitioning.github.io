<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sharon Howard">
<meta name="description" content="Did petitioners get what they wanted?">

<title>QS responses to petitions – Exploring The Power of Petitioning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2e1c76687fb8e56fe79e3ab19f855661.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Exploring The Power of Petitioning</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../themes/index.html"> 
<span class="menu-text">Themes</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#quarter-sessions-petitions" id="toc-quarter-sessions-petitions" class="nav-link active" data-scroll-target="#quarter-sessions-petitions">Quarter Sessions petitions</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The data</a></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#in-more-depth" id="toc-in-more-depth" class="nav-link" data-scroll-target="#in-more-depth">In more depth</a>
  <ul class="collapse">
  <li><a href="#petition-topics" id="toc-petition-topics" class="nav-link" data-scroll-target="#petition-topics">petition topics</a></li>
  <li><a href="#petition-type" id="toc-petition-type" class="nav-link" data-scroll-target="#petition-type">petition type</a></li>
  <li><a href="#petition-gender-type" id="toc-petition-gender-type" class="nav-link" data-scroll-target="#petition-gender-type">petition gender type</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">QS responses to petitions</h1>
  <div class="quarto-categories">
    <div class="quarto-category">QS</div>
    <div class="quarto-category">authorities</div>
  </div>
  </div>

<div>
  <div class="description">
    Did petitioners get what they wanted?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sharon Howard </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="quarter-sessions-petitions" class="level2">
<h2 class="anchored" data-anchor-id="quarter-sessions-petitions">Quarter Sessions petitions</h2>
<p>I initially focused on Cheshire quarter sessions; although this is still my main interest, I’m now able to add some data for the four other counties in TPOP’s transcribed QS collections (Derbyshire, Staffordshire, Westminster and Worcestershire) for comparisons.</p>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>The data is available, with full documentation, from <a href="https://doi.org/10.5281/zenodo.7027692">Zenodo</a>.</p>
<p>Cheshire: I’m working with a sample of 613 petitions from the Cheshire QS files between 1573 and 1798. I photographed all surviving petitions from every year ending in -8 between 1608 and 1798, plus every pre-1600 calendared petition. (My estimate is that there are in total about 5000 petitions in the files.) TPOP transcribed all the 16th-century petitions and a 1-in-20-year sample for the 17th and 18th centuries (years -08, -18, -38, -58, -78, -98); I abstracted the rest, and encoded all the responses.</p>
<p>For the other four counties, I have a total of 1115 petitions (1589-1799). As I’ve noted <a href="topics.html">elsewhere</a>, the survival of petitions in these collections is much more patchy than for Cheshire. Also, the individual counties’ numbers are smaller (Derbyshire in particular has only 94 petitions).</p>
<p>I’m using only responses written directly on the petitions. This may miss responses recorded in separate documents, though I haven’t found any extra information while consulting the Cheshire files. I’ve also examined the 17th-century Cheshire QS order books, but haven’t found additional responses there; they’re more useful for fleshing out the reasoning behind the brief summaries on the petitions.</p>
<p>About 70% of the Cheshire petitions have some kind of annotated response and, since I couldn’t find further records of responses, I decided to treat the absence of a recorded response as a type of <em>negative</em> response. However, annotated response rates have turned out to be considerably lower (and quite variable) for the other counties, and I haven’t been able to check for additional sources for those collections. So this will need to be borne in mind when making comparisons.</p>
<p>The detailed coding categories:</p>
<ul>
<li><strong>granted</strong> = request granted in full</li>
<li><strong>grant_part</strong> = request partially granted (eg smaller amount of relief than requested)</li>
<li><strong>grant_cond</strong> = granted, but conditional on the petitioner doing something</li>
<li><strong>referred</strong> = to be further investigated or mediated outside the court, usually by local JPs</li>
<li><strong>rejected_nil</strong> = rejection with only the terse annotation “nil/nihil” or “nothing”</li>
<li><strong>rejected</strong> = rejection with a reason given (including “absent”)</li>
<li><strong>no_response</strong> = no response written on the petition</li>
<li><strong>uncertain</strong> = an apparent response, but it couldn’t be interpreted (eg damaged or illegible).</li>
</ul>
<p>Simplified positive/negative:</p>
<ul>
<li><strong>positive</strong> = granted, grant_part, grant_cond or referred</li>
<li><strong>negative</strong> = rejected_nil, rejected, no_response</li>
</ul>
<p>I’ll exclude the small uncertain group from analysis (some may not even be responses), so I’m looking at 593 Cheshire petitions and 1083 others.</p>
</section>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>How often do petitioners get what they want?</p>
<p>Overall, 56.3% of the 593 Cheshire petitions received a <em>positive</em> response, which suggests is that petitioners to the Cheshire magistrates had a reasonable chance of getting at least part of what they wanted, but a positive outcome was far from guaranteed.</p>
<p>However, petitioners in the other four counties appear to have been less likely to get a positive response, averaging only 28%. Westminster stands out with an exceptionally low positive response rate of only 7.9%.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-responses-to-counties-qs-petitions-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative responses to QS petitions between 1573 and 1798, by county; positive response rates were higher for Cheshire than any other county." width="672"></p>
</figure>
</div>
</div>
</div>
<p>A more detailed breakdown:</p>
<p>Cheshire: 229 (37.3%) requests were granted in full, 50 (8.4%) partially or conditionally and 55 (9.3%) were referred. 75 (12.6%) were rejected with a response and 184 (31%) had no response.</p>
<p>The other counties vary, but it’s clear that the main difference is no-response petitions. Westminster is <em>so</em> different from the other counties that it does suggest the possibility of very different recording practices.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-detailed-responses-to-counties-qs-petitions-1.png" class="img-fluid figure-img" alt="Waffle chart of detailed response categories for Quarter Sessions petitions." width="672"></p>
</figure>
</div>
</div>
</div>
<p>On the other hand, there are some broad similarities between Cheshire, Derbyshire, Staffordshire and Worcestershire. If negative response and no response petitions are combined, the differences between these four counties are less noticeable. Cheshire JPs <em>were</em> more likely to respond positively to petitions, but it seems they were also simply more likely to bother to annotate a negative response. Derbyshire magistrates were least likely, apparently, to refer petitions for further arbitration.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-less-detailed-responses-to-counties-qs-petitions-1.png" class="img-fluid figure-img" alt="Waffle chart of detailed response categories for Quarter Sessions petitions, combining all negative responses into a single category." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="in-more-depth" class="level2">
<h2 class="anchored" data-anchor-id="in-more-depth">In more depth</h2>
<p>Could variations in responses point to factors that increase or reduce the chances of success?</p>
<section id="petition-topics" class="level3">
<h3 class="anchored" data-anchor-id="petition-topics">petition topics</h3>
<p>The topics are a set of broad categories manually assigned by the project for QS petitions; a couple of topics with very low numbers (dissenting worship, debtors - &lt;10 petitions) have been merged into the “other” category.</p>
<p>The proportional bar chart on the left shows the detailed breakdown of responses (Cheshire QS only). The smaller chart on the right shows the % of positive responses and the size of the square indicates the relative size of the category.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/proportional-bar-responses-cheshire-qs-petitions-by-topics-1.png" class="img-fluid figure-img" alt="Dual chart of responses to Cheshire petitions broken down by petition topics, ordered by % of positive responses: 1. Proportional stacked bar chart of detailed response categories to petitions; 2. &quot;Bubble&quot; chart of % of positive responses for each topic." width="672"></p>
</figure>
</div>
</div>
</div>
<p>In some categories, the numbers may be too small to draw any real conclusions. Even so, it’s noticeable that there is some relationship between the number of petitions in a topic and the likelihood of a positive response; that’s to say, <em>smaller</em> topic categories are <em>less</em> likely to get a positive response. The exceptions to this pattern are the largest category (litigation, 171 petitions and one of the lowest positive response rates at 44.4%) and employment (15 petitions, 73% positive responses).</p>
<p>But when analysis is extended to the other counties, the patterns are rather different and that possible correlation disappears.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/proportional-bar-responses-other-qs-petitions-by-topics-1.png" class="img-fluid figure-img" alt="Dual chart of responses to petitions excl Cheshire, broken down by petition topics, ordered by % of positive responses: 1. Proportional stacked bar chart of detailed response categories to petitions; 2. &quot;Bubble&quot; chart of % of positive responses for each topic." width="672"></p>
</figure>
</div>
</div>
</div>
<p>Additionally, Cheshire has two very distinct clusters in positive response rates by topic size.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/scatter-plot-positive-responses-topics-size-cheshire-1.png" class="img-fluid figure-img" alt="Scatter plot with text labels showing relations between % positive responses and number of petitions in topics, indicating two main clusters of topics; (mostly) small numbers <50% positive responses, larger numbers >60% positive." width="672"></p>
</figure>
</div>
</div>
</div>
<p>For the other counties there is no sign of the same clustering by topic size. But in terms of positive response %s there are some similarities in topics.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/scatter-plot-positive-responses-topics-size-other-1.png" class="img-fluid figure-img" alt="Scatter plot with text labels showing relations between % positive responses and number of petitions in topics (excl Cheshire), also indicating two main clusters of topics but no correlation with topic size" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Another feature to note is the unusually high percentage of conditional responses for cottage petitions; it was very common for a request to be allowed to build a cottage to be granted on condition of obtaining the consent of the lord of the manor.</p>
</section>
<section id="petition-type" class="level3">
<h3 class="anchored" data-anchor-id="petition-type">petition type</h3>
<p>Variations here appear to be much less noteworthy than previous categories of analysis.</p>
<p>Three types</p>
<ul>
<li>single petitioner (413)</li>
<li>multiple named petitioners (72)</li>
<li>collective (eg “inhabitants of Nantwich”) (108)</li>
</ul>
<p>There is very little difference in overall positive/negative responses to the three types, though single-petitioner petitions are slightly more likely to receive a positive response.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-responses-to-cheshire-qs-petitions-by-petition-type-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative responses to petitions(Cheshire), faceted by petition type (single, group, collective); shows not much variation between the types." width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-responses-to-other-qs-petitions-by-petition-type-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative responses to petitions (excl Cheshire), faceted by petition type (single, group, collective); shows not much variation between the types." width="672"></p>
</figure>
</div>
</div>
</div>
<p>The responses breakdown does show more variation. The single category is far less likely to get no response at all, <em>and</em> is most likely to have requests granted in full. (But, interestingly, collective petitions are most likely to have a reason given for rejection.)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-detailed-responses-to-cheshire-qs-petitions-by-petition-type-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative response categories to petitions faceted by petition type." width="672"></p>
</figure>
</div>
</div>
</div>
<p>Same breakdown for the other counties.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-detailed-responses-to-other-qs-petitions-by-petition-type-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative response categories to other petitions faceted by petition type." width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="petition-gender-type" class="level3">
<h3 class="anchored" data-anchor-id="petition-gender-type">petition gender type</h3>
<p>(Collective petitions excluded.)</p>
<p>A summary of gender of all petitioners (but not additional subscribers) per petition:</p>
<ul>
<li>f = female only (128 petitions)</li>
<li>m = male only (343)</li>
<li>fm = mixed gender (26)</li>
</ul>
<p>Again there is very little variation in positive response rates. I might have expected slightly more variation in this category as I know there are gendered variations in petition topics; I’ll need to explore this further.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-responses-to-cheshire-qs-petitions-by-petition-gender-type-1.png" class="img-fluid figure-img" alt="Waffle chart of positive vs negative responses to petitions faceted by petition gender type (female, male, mixed); differences between genders are smaller than I might have expected." width="672"></p>
</figure>
</div>
</div>
</div>
<p>And again, the more detailed breakdown of responses shows up more subtle variations. It appears that petitions involving female petitioners were less likely to have requests granted <em>in full</em> and more likely to have their cases referred to JPs for further investigation.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-detailed-responses-to-cheshire-qs-petitions-by-petition-gender-type-1.png" class="img-fluid figure-img" alt="Waffle chart of detailed response categories to Cheshire petitions faceted by petition gender." width="672"></p>
</figure>
</div>
</div>
</div>
<p>Other counties for comparison.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/waffle-detailed-responses-to-other-qs-petitions-by-petition-gender-type-1.png" class="img-fluid figure-img" alt="Waffle chart of detailed response categories to other counties petitions faceted by petition gender." width="672"></p>
</figure>
</div>
</div>
</div>
<p>[Updated] Breakdown by topic as well as gender (excluding mixed gender).</p>
<p>For Cheshire:</p>
<ul>
<li>Greater tendency for female petitions to be referred is clear across multiple topic categories. (The only topics with a higher % of male referrals are ones that have very very few female petitions.)</li>
<li>The situation with fully granted requests is a bit more mixed, but most of the lower female % is probably accounted for by the two large (and very distinct!) categories of litigation and poor relief.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/proportional-bar-detailed-responses-to-cheshire-qs-petitions-by-petition-gender-type-topic-1.png" class="img-fluid figure-img" alt="Proportional stacked bar chart of detailed response categories to Cheshire petitions broken down by topic and petition gender (excluding mixed gender)." width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="responses_files/figure-html/proportional-bar-detailed-responses-to-other-qs-petitions-by-petition-gender-type-topic-1.png" class="img-fluid figure-img" alt="Proportional stacked bar chart of detailed response categories to petitions excl Cheshire, broken down by topic and petition gender (excluding mixed gender)." width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>